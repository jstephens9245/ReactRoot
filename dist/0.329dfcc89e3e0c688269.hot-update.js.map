{"version":3,"sources":["webpack:///./client/Routes.jsx?c208","webpack:///./client/actions/note.js?46db","webpack:///./client/actions/socketio.js?f235"],"names":["Routes","indexEnter","dispatch","onBoardEnter","nextRouterState","boardHash","params","getState","noteReducer","all","length","onMyBoardEnter","receiveNote","receiveNotes","selectNote","getNote","getAllNotes","createNote","note","type","payload","notes","noteId","moveNote","id","left","top","selectedNoteDetail","selectedNoteDetails","noteArrayIndexPush","noteArr","zIndexNotes","addNoteToBoard","newNote","setNoteCoords","deleteNote","deletedNote","get","then","res","data","Promise","catch","console","warn","err","noteMover","IndexToZIndex","dragNoteId","newNoteArr","dragNoteIndex","map","indexOf","dragNote","splice","push","notesDelete","newArr","deleteNoteId","deleteNoteIndex","deleteNotesFromDatabase","deleteNotesArr","forEach","delete","deleted","log","userId","boardId","post","content","color","mentions","io","socket","addListener","eventName","clearAllListeners","socketConnect","namespace","socketEmit","emit","addSocketListener","method","on","clearSocketListeners","events","removeAllListeners","e","socketDisconnect","disconnect"],"mappings":"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","file":"0.329dfcc89e3e0c688269.hot-update.js","sourcesContent":["import React from 'react';\nimport store from './store';\nimport {Route, IndexRoute, Router, browserHistory} from 'react-router';\n\n//containers\nimport HomepageContainer from './containers/HomepageContainer';\nimport BoardContainer from './containers/BoardContainer';\nimport CreateBoardContainer from './containers/CreateBoardContainer';\nimport CreateNoteContainer from './containers/CreateNoteContainer';\nimport ViewNoteContainer from './containers/ViewNoteContainer';\nimport SignupContainer from './containers/SignupContainer';\nimport MobileBoardViewContainer from './containers/MobileBoardViewContainer';\n\n//action-creators\nimport {getBoard, getAllBoards} from './actions/board';\n// import {getNotes} from './actions/noteboard';\nimport {getAllNotes} from './actions/note';\nimport {checkLoginStatus} from './actions/user';\n\n//components\nimport Index from './components/Index';\n\n\n//onEnters\nfunction indexEnter() {\n  store.dispatch(checkLoginStatus());\n}\n\nfunction onBoardEnter(nextRouterState) {\n  const boardHash = nextRouterState.params.boardHash;\n  store.dispatch(getBoard(boardHash));\n  store.dispatch(getAllBoards());\n  if (!store.getState().noteReducer.all.length) {\n    store.dispatch(getAllNotes({boardHash}));\n  }\n\n}\n\nfunction onMyBoardEnter(nextRouterState) {\n  store.dispatch(getAllBoards());\n}\n\nexport default function Routes() {\n  return (\n    <Router history={browserHistory}>\n      <Route path=\"/\" component={Index} onEnter={indexEnter}>\n        <IndexRoute component={HomepageContainer} />\n        <Route path=\"/signup\" component={SignupContainer} />\n        <Route path=\"/boards\" component={CreateBoardContainer} onEnter={onMyBoardEnter} />\n        <Route path='/boards/:boardHash' component={BoardContainer} onEnter={onBoardEnter} />\n\n        <Route path=\"/note\">\n          <IndexRoute component={CreateNoteContainer} onEnter={onMyBoardEnter}/>\n          <Route path=\":id\" component={ViewNoteContainer} />\n        </Route>\n      </Route>\n    </Router>\n  );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/Routes.jsx\n **/","import axios from 'axios';\nimport { DELETE_NOTE, NOTE_ARRAY_INDEX_PUSH, SET_NOTE_COORDS, ADD_NOTE_TO_BOARD, RECEIVE_NOTES, RECEIVE_NOTE, SELECT_NOTE, MOVE_NOTE, NOTE_DETAIL} from '../constants';\nimport {socketEmit} from './socketio';\n\nexport function receiveNote(note) {\n  return {\n    type   : RECEIVE_NOTE,\n    payload: note\n  };\n}\n\nexport function receiveNotes(notes) {\n  return {\n    type   : RECEIVE_NOTES,\n    payload: notes\n  };\n}\n\nexport function selectNote(noteId) {\n  return {\n    type   : SELECT_NOTE,\n    payload: {noteId}\n  };\n}\n\nexport const moveNote = (id, left, top) => {\n  return {\n    type : MOVE_NOTE,\n    notes: {\n      [id]: {left, top}\n    }\n  };\n};\n\nexport const selectedNoteDetail = (selectedNoteDetails) => {\n  return {\n    type: NOTE_DETAIL,\n    selectedNoteDetails\n  };\n};\n\n\nexport const noteArrayIndexPush = (noteArr) => {\n  return {\n    type       : NOTE_ARRAY_INDEX_PUSH,\n    zIndexNotes: noteArr\n  };\n};\n\nexport const addNoteToBoard = (note) => {\n  return {\n    type   : ADD_NOTE_TO_BOARD,\n    newNote: note\n  };\n};\n\n\nexport const setNoteCoords = (note) => {\n  return {\n    type: ADD_NOTE_TO_BOARD,\n    note: note\n  };\n};\n\nexport const deleteNote = (note) => {\n  return {\n    type       : DELETE_NOTE,\n    deletedNote: note\n  };\n};\n\n\nexport function getNote(noteId) {\n  return (dispatch) =>\n  axios.get(`/api/notes/${noteId}`)\n    .then(res => res.data)\n    .then(note => dispatch(receiveNote(note)))\n    .then(note => {\n      return Promise.all([\n        note,\n        dispatch(selectNote(noteId))\n      ]);\n    })\n    .then(([ note ]) => note)\n    .catch(err => console.warn(err));\n}\n\nexport const noteMover = (id, left, top) => {\n  const data = {[id]: {left, top}};\n\n  return dispatch => {\n    dispatch(socketEmit('moveNote', data));\n    dispatch(moveNote(id, left, top));\n\n\n  };\n};\n\n\nexport const IndexToZIndex = (notes, dragNoteId) => {\n  return dispatch => {\n\n    const newNoteArr = notes;\n    const dragNoteIndex = notes.map((note) => { return note.id; }).indexOf(dragNoteId);\n    const dragNote = notes[dragNoteIndex];\n\n    newNoteArr.splice(dragNoteIndex, 1);\n    newNoteArr.push(dragNote);\n\n    dispatch(noteArrayIndexPush(newNoteArr));\n  };\n};\n\nexport const notesDelete = (noteId, notes) => {\n  return dispatch => {\n    const newArr = notes;\n    const deleteNoteId = noteId;\n    const deleteNoteIndex = notes.map((note) => { return note.id; }).indexOf(deleteNoteId);\n    const deletedNote = notes[deleteNoteIndex];\n\n    newArr.splice(deleteNoteIndex, 1);\n    dispatch(deleteNote(deletedNote));\n    dispatch(receiveNotes(newArr));\n\n  };\n};\n\nexport const deleteNotesFromDatabase = (deleteNotesArr) => {\n  deleteNotesArr.forEach(note => {\n    axios.delete(`/api/notes/${note.id}`)\n      .then((deleted) => (console.log('DELETED NOTES', deleted)))\n      .catch(err => console.log('deleteNotes from datatbase had an error'));\n\n  });\n};\n\nexport function getAllNotes({userId, boardId}) {\n  return dispatch =>\n    axios.get('/api/notes/', {params: {userId, boardId}})\n      .then(res => {\n        return res.data;\n      })\n      .then(notes => dispatch(receiveNotes(notes)))\n      .catch(err => console.warn(err));\n}\n\n\nexport function createNote(note, boardId) {\n  return dispatch =>\n    axios.post('/api/notes/', {\n      content : note.content,\n      color   : note.color,\n      mentions: note.mentions || [],\n      boardId : boardId || note.boardId\n    })\n      .then(({data}) => {\n        dispatch(socketEmit('note', data));\n      })\n      .catch(err => console.warn(err));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/actions/note.js\n **/","\nimport { CONNECT, ADD_LISTENER, REMOVE_LISTENER, EMIT } from '../constants';\nimport socketClient from 'socket.io-client';\nconst io =  socketClient;\n\n\nimport isEmpty from 'lodash/isEmpty';\n\nlet socket = {};\n\nexport const addListener = (eventName) => ({\n  type: ADD_LISTENER,\n  eventName\n});\n\nexport const clearAllListeners = () => ({\n  type: REMOVE_LISTENER\n});\n\n\n//need to change to ip address where board resides\n\nexport const socketConnect = (namespace) => dispatch => {\n  if (isEmpty(socket)) socket = io(`/${namespace}`);\n};\n\nexport const socketEmit = (eventName, payload) => dispatch => {\n  if (!isEmpty(socket)) {\n    socket.emit(eventName, payload);\n  }\n};\n\nexport const addSocketListener = (eventName, method) => dispatch => {\n  if (!isEmpty(socket)) {\n    socket.on(eventName, method);\n    dispatch(addListener(eventName));\n  }\n};\n\nexport const clearSocketListeners = () => (dispatch, getState) => {\n  if (!isEmpty(socket)) {\n    const events =  getState().socket.events;\n    events.forEach(e => {\n      socket.removeAllListeners(e);\n    });\n  }\n  dispatch(clearAllListeners());\n};\n\nexport const socketDisconnect = () => (dispatch) => {\n  if (socket.disconnect) {\n    socket.disconnect();\n    socket = {};\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/actions/socketio.js\n **/"],"sourceRoot":""}