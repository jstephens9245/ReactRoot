{"version":3,"sources":["webpack:///./client/reducers/noteReducer.js?2129","webpack:///./client/containers/CreateNoteContainer.js?0bfc","webpack:///./client/components/CreateNote.js?f10c"],"names":["noteReducer","initState","all","selected","allBoardSpecificNotes","deletedNotes","selectedNoteDetails","state","action","nextState","Object","assign","type","payload","find","note","id","noteId","map","keyId","notes","left","top","newNote","zIndexNotes","deletedNote","mapStateToProps","mapDispatchToProps","board","selectedBoard","user","userReducer","loggedInUser","queriedUsers","permissions","dispatch","createNote","getBoard","socketConnect","addSocketListener","socketEmit","clearSocketListeners","socketDisconnect","searchUsername","addUserPermission","receiveNote","content","mentions","parsedContent","color","rgb","hex","caretPos","displayColorPicker","hasJoined","flickState","dragStart","position","colorLocked","CreateNote","props","input","changeHandler","submitHandler","clickHandler","modalClickHandler","updateColor","toggleColorPicker","join","focusHandler","blurHandler","touchStartHandler","touchEndHandler","touchMoveHandler","parseContent","autoComplete","location","query","router","push","room","userId","setState","keys","length","findIndex","permission","board_id","name","first_name","last_name","prevState","newState","Array","isArray","e","preventDefault","target","value","stopPropagation","focus","cb","currentTarget","focused","touches","pageY","dragPosition","viewportWidth","window","innerWidth","screen","width","Math","abs","setTimeout","innerHeight","height","then","selectionStart","users","currentWord","i","char","startIndex","tail","trimTail","slice","undefined","isMention","isSuggesting","replace","suggestedUsers","noteWrapperStyle","zIndex","transform","transition","hash","part","username","margin","background","str","match"],"mappings":"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","file":"0.32a5c19e0068e8df9c60.hot-update.js","sourcesContent":["\nimport {DELETE_NOTE, DRAGGED_NOTE, NOTE_ARRAY_INDEX_PUSH, SET_NOTE_COORDS, ADD_NOTE_TO_BOARD, RECEIVE_NOTE, RECEIVE_NOTES, SELECT_NOTE, MOVE_NOTE, NOTE_DETAIL } from '../constants';\n\n\nconst initState = {\n  all                  : [],\n  selected             : null,\n  allBoardSpecificNotes: {},\n  deletedNotes         : [],\n  selectedNoteDetails  : null\n};\n\nexport default function noteReducer(state = initState, action) {\n  const nextState = Object.assign({}, state);\n\n  switch (action.type) {\n  case RECEIVE_NOTE:\n    nextState.all = [ ...nextState.all, action.payload ];\n    break;\n\n  case RECEIVE_NOTES:\n    nextState.all = action.payload;\n    break;\n\n  case SELECT_NOTE:\n    nextState.selected = nextState.all.find(note => note.id == action.payload.noteId);\n    break;\n\n  case MOVE_NOTE:\n    nextState.all = nextState.all.map((note) => {\n      const keyId =  note.id;\n      if (action.notes[keyId]) {\n        return Object.assign({}, note, {left: action.notes[keyId].left, top: action.notes[keyId].top });\n      } else {\n        return note;\n      }\n    });\n    break;\n\n  case NOTE_DETAIL:\n    nextState.selectedNoteDetails = action.selectedNoteDetails;\n    break;\n\n  case ADD_NOTE_TO_BOARD:\n    const newNote = action.newNote;\n    nextState.all = [ ...nextState.all, newNote ];\n\n    break;\n\n  case NOTE_ARRAY_INDEX_PUSH:\n\n    nextState.all = action.zIndexNotes;\n    break;\n\n  case SET_NOTE_COORDS:\n    nextState.all = nextState.all.map((note) => {\n      const keyId =  note.id;\n      if (action.notes[keyId]) {\n        return Object.assign({}, note, {left: action.notes[keyId].left, top: action.notes[keyId].top });\n      } else {\n        return note;\n      }\n    });\n    break;\n\n  case DELETE_NOTE:\n\n    nextState.deletedNotes = [ ...nextState.deletedNotes, action.deletedNote ];\n    break;\n\n\n  default:\n    return state;\n  }\n\n\n  return nextState;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/reducers/noteReducer.js\n **/","import React from 'react';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport CreateNote from '../components/CreateNote';\n\nimport {getBoard, addUserPermission} from '../actions/board';\nimport {createNote, receiveNote} from '../actions/note';\nimport {searchUsername} from '../actions/user';\nimport {\n  socketConnect,\n  socketEmit,\n  clearSocketListeners,\n  socketDisconnect,\n  addSocketListener\n} from '../actions/socketio';\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateNote);\n\nfunction mapStateToProps(state) {\n  return {\n    board       : state.board.selectedBoard,\n    user        : state.userReducer.loggedInUser,\n    queriedUsers: state.userReducer.queriedUsers,\n    permissions : state.board.permissions\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    createNote,\n    getBoard,\n    socketConnect,\n    addSocketListener,\n    socketEmit,\n    clearSocketListeners,\n    socketDisconnect,\n    searchUsername,\n    addUserPermission,\n    receiveNote\n  }, dispatch);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/containers/CreateNoteContainer.js\n **/","import React, {Component} from 'react';\nimport {Link} from 'react-router';\nimport isEmpty from 'lodash/isEmpty';\nimport bindHandlers from '../utils/bindHandlers';\nimport Note from './Note';\nimport ColorPicker from './ColorPicker';\nimport AutoSuggest from 'react-autosuggest';\nimport Color from 'color';\nimport {genShortHash} from '../utils/stringHash';\nimport presetColors from '../presetColors.json';\nconst initState = {\n  content           : '',\n  mentions          : [],\n  parsedContent     : [],\n  color             : Color.rgb([ 237, 208, 13 ]).hex(),\n  caretPos          : 0,\n  displayColorPicker: false,\n  hasJoined         : false,\n  flickState        : false,\n  dragStart         : null,\n  position          : 0,\n  colorLocked       : true\n};\n\nexport default class CreateNote extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.input = {};\n    this.state = initState;\n    bindHandlers(this,\n      this.changeHandler,\n      this.submitHandler,\n      this.clickHandler,\n      this.modalClickHandler,\n      this.updateColor,\n      this.toggleColorPicker,\n      this.join,\n      this.focusHandler,\n      this.blurHandler,\n      this.touchStartHandler,\n      this.touchEndHandler,\n      this.touchMoveHandler,\n      this.parseContent,\n      this.autoComplete\n    );\n  }\n\n  componentWillMount() {\n    if ((!this.props.board || isEmpty(this.props.board)) && !this.props.location.query.board) {\n      // If no board is selected and no board ID is provided\n      // redirect to myBoards page\n      this.props.router.push('/myboards');\n    } else if (!this.props.board || isEmpty(this.props.board)) {\n      // if no board is selected but a board ID is provided\n      // select board by ID\n      this.props.getBoard(this.props.location.query.board);\n    }\n  }\n\n  componentDidMount() {\n    // document.addEventListener('keyup', this.updateCursor);\n  }\n\n  componentWillUnmount() {\n    // document.removeEventListener('keyup', this.updateCursor);\n    this.props.clearSocketListeners();\n    this.props.socketDisconnect();\n    this.props.socketEmit('leave', {\n      room  : genShortHash(this.props.board.id),\n      userId: this.props.user.id\n    });\n  }\n\n  componentWillReceiveProps({board, user, queriedUsers}) {\n    if (board && user && !isEmpty(board) && !isEmpty(user) && !this.state.hasJoined) {\n      this.props.socketConnect('board');\n      this.props.addSocketListener('connect', this.join);\n      this.props.addSocketListener('note', this.props.receiveNote);\n      this.setState({hasJoined: true});\n    }\n  }\n\n  join() {\n    if (Object.keys(this.props.user).length) {\n      if (this.props.permissions.findIndex(permission => {\n        return permission.board_id === this.props.board.id;\n      }) === -1) {\n        this.props.addUserPermission(this.props.board);\n      }\n    }\n    this.props.socketEmit('join', {\n      room  : genShortHash(this.props.board.id),\n      name  : this.props.user.first_name + ' ' + this.props.user.last_name,\n      userId: this.props.user.id\n    });\n  }\n\n  toggleColorPicker() {\n    this.setState((prevState) => {\n      return Object.assign(\n        {},\n        prevState,\n        {displayColorPicker: !prevState.displayColorPicker});\n    });\n  }\n\n  updateColor(color) {\n    const newState = {};\n    if (typeof color === 'string') newState.color = color;\n    else if (Array.isArray(color)) newState.color = Color.rgb(color).hex();\n    this.setState(newState);\n  }\n\n  changeHandler(e) {\n    e.preventDefault();\n    this.parseContent(e.target.value);\n  }\n\n  clickHandler(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.input.focus();\n  }\n\n  modalClickHandler(e, cb) {\n    e.stopPropagation();\n    if (e.target === e.currentTarget) cb(e);\n  }\n\n  focusHandler() {\n\n    this.setState({focused: true});\n  }\n\n  blurHandler() {\n    this.setState({focused: false});\n  }\n\n  touchStartHandler(e) {\n    this.setState({flickState: 'positioning', dragStart: e.touches[0].pageY});\n  }\n\n  touchMoveHandler(e) {\n    const dragPosition = e.touches[0].pageY;\n    if (this.state.dragStart && dragPosition < this.state.dragStart) {\n      this.setState({ position: dragPosition - this.state.dragStart });\n    }\n  }\n\n  touchEndHandler(e) {\n    const viewportWidth = window.innerWidth ? window.innerWidth : window.screen.width;\n    if (Math.abs(this.state.position) > viewportWidth / 2) {\n      this.setState({flickState: 'sending', position: -viewportWidth});\n      setTimeout(() => {\n        this.submitHandler();\n      }, 100);\n    } else this.setState({flickState: 'resting', dragStart: null, position: 0});\n  }\n\n  submitHandler(e) {\n    if (e) e.preventDefault();\n\n    this.setState({\n      flickState: 'positioning',\n      position  : window.innerHeight || window.screen.height\n    });\n    this.props.createNote({\n      content : this.state.content,\n      color   : this.state.color,\n      mentions: this.state.mentions\n    }, this.props.board.id)\n      .then(() => {\n        const newState = {flickState: 'returning', colorLocked: this.state.colorLocked};\n        if (this.state.colorLocked) newState.color = this.state.color;\n        this.setState(Object.assign({}, initState, newState));\n      });\n  }\n\n  parseContent(content) {\n    const caretPos = this.input.selectionStart;\n    const users = this.props.queriedUsers;\n    const parsedContent = [];\n    let currentWord = '';\n\n    for (let i = 0; i < content.length; i++) {\n      let char = content[i];\n      const startIndex = i;\n\n      if (char === '@') {\n        do {\n          currentWord += char;\n          i++;\n          char = content[i];\n        } while (char !== ' ' && i < content.length);\n        const tail = trimTail(currentWord.slice(1));\n        currentWord = currentWord.slice(0, -tail.length || undefined);\n\n        if (caretPos > startIndex && caretPos <= startIndex + currentWord.length) {\n          this.props.searchUsername(currentWord.slice(1));\n          parsedContent.push({content: currentWord, isMention: true, isSuggesting: true});\n        } else {\n          parsedContent.push({content: currentWord, isMention: true, isSuggesting: false});\n        }\n        parsedContent.push({content: tail + (char || '')});\n      } else {\n        currentWord = '';\n        parsedContent.push({content: char});\n      }\n    }\n\n    this.setState({content, caretPos, parsedContent});\n  }\n\n  autoComplete(find, replace, id) {\n    const content = this.state.content.replace(find, replace);\n    this.setState((state) => {\n      return Object.assign({}, state, {mentions: [ ...state.mentions, id ]});\n    });\n    this.parseContent(content);\n  }\n\n  render() {\n    const {colorLocked} = this.state;\n    const suggestedUsers = this.props.queriedUsers;\n    const noteWrapperStyle = {zIndex: 1};\n    noteWrapperStyle.transform = `rotate(${this.state.position * 0.02}deg)`;\n    noteWrapperStyle.top = this.state.position;\n\n    switch (this.state.flickState) {\n    case 'positioning':\n      break;\n    case 'sending':\n      noteWrapperStyle.transition = 'all 0.1s ease-in';\n      break;\n    case 'returning':\n      noteWrapperStyle.top = 0;\n      noteWrapperStyle.transition = 'all 0.25s ease-in-out';\n      break;\n    default:\n      noteWrapperStyle.transition = 'all 0.25s ease-in-out';\n    }\n    const value = `/boards/${this.props.board.hash}`;\n\n    return (\n      <div className=\"container\">\n        <Link to={`/boards/${this.props.board.hash}`}>\n        <h1 className=\" noteTitle center\">{this.props.board ? this.props.board.name : ''}</h1>\n        </Link>\n        <div className=\"row\">\n          <div className=\"col-xs-10 col-xs-offset-1 col-md-4 col-md-offset-4\">\n            <button onClick={() => { this.setState({content: '', parsedContent: []}); }} className=\"c-note__clear-btn\">clear note</button>\n            <div\n              className=\"c-note---createwrapper\"\n              style={noteWrapperStyle}\n              onClick={!!this.input && this.clickHandler}\n              onTouchStart={this.touchStartHandler}\n              onTouchMove={this.touchMoveHandler}\n              onTouchEnd={this.touchEndHandler}>\n              <Note\n                editable={true}\n                color={this.state.color}>\n                <div>\n                  {this.state.parsedContent.map(part => {\n                    if (part.isMention && part.isSuggesting) {\n                      return (\n                        <span className=\"c-mention c-mention--suggesting\">\n                          {part.content}\n                          <ul className=\"c-mention__suggestions\">\n                            {suggestedUsers.map((user) => (\n                              <li>\n                                <button onClick={() => this.autoComplete(part.content, '@' + user.username, user.id)}>@{user.username}</button>\n                              </li>\n                            ))}\n                          </ul>\n                        </span>\n                      );\n                    } else if (part.isMention) {\n                      return (\n                        <span className=\"c-mention\">\n                          {part.content}\n                        </span>\n                      );\n                    } else return part.content;\n                  })}\n                </div>\n              </Note>\n              <input type=\"text\"\n                value={this.state.content}\n                className=\"c-note__input\"\n                ref={(input) => { this.input = input; }}\n                onFocus={this.focusHandler}\n                onBlur={this.blurHandler}\n                onChange={this.changeHandler} />\n            </div>\n            <div className=\"clearfix\" style={{margin: '0.25em auto'}}>\n              <button\n                onClick={this.toggleColorPicker}\n                className=\"btn btn-color\"\n                style={{background: this.state.color}}>\n              </button>\n              <label htmlFor=\"lock-color\" className={`c-checkbox ${colorLocked ? 'c-checkbox--checked' : ''} right`}>Lock Color</label>\n              <input onChange={() => {\n                this.setState({colorLocked: !this.state.colorLocked});\n              }} id=\"lock-color\" className=\"c-checkbox__input\" type=\"checkbox\" name=\"lock-color\" checked={colorLocked}/>\n            </div>\n            <div className=\"row\">\n              <button\n                onClick={this.submitHandler}\n                className=\"btn btn-primary block ml-auto mr-auto\"\n                style={{width: '90%'}}>\n                Submit Note\n              </button>\n            </div>\n          </div>\n          { this.state.displayColorPicker &&\n            <div>\n              <div className=\"c-color-picker__wrapper c-color-picker__wrapper--modal\"\n                onClick={(e) => { this.modalClickHandler(e, this.toggleColorPicker); }}>\n                <ColorPicker\n                  color={this.state.color}\n                  updateColor={this.updateColor}\n                  presets={presetColors}\n                  toggle={this.toggleColorPicker} />\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction trimTail(str) {\n  let tail = '';\n\n  for (let i = 0; i < str.length; i++) {\n    if (str[i].match(/[^A-Za-z0-9_]/)) {\n      tail = str.slice(i);\n      break;\n    }\n  }\n\n  return tail;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/components/CreateNote.js\n **/"],"sourceRoot":""}