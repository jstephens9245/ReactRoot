{"version":3,"sources":["webpack:///./client/containers/ParticipantsContainer.js?5bcb"],"names":["ParticipantsContainer","props","state","totalParticipants","participants","display","connect","bind","disconnect","joined","getRoomHash","toggleParticipantsMenu","socketConnect","addSocketListener","socketEmit","room","selectedBoard","id","clearSocketListeners","socketDisconnect","setState","status","push","Object","keys","loggedInUser","length","permissions","findIndex","permission","board_id","addUserPermission","name","first_name","last_name","mapStateToProps","userReducer","socket","board","mapDispatchToProps","dispatch","eventName","method","payload","namespace"],"mappings":"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","file":"0.a6f6d0bfa15b4dc0cea7.hot-update.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { browserHistory } from 'react-router';\n\nimport { socketConnect,\n        socketEmit,\n        addSocketListener,\n        clearSocketListeners,\n        socketDisconnect } from '../actions/socketio';\n\nimport Participants from '../components/Participants';\n\nimport { genShortHash } from '../utils/stringHash';\n\nimport isEmpty from 'lodash/isEmpty';\n\nimport {addUserPermission} from '../actions/board';\n\nexport class ParticipantsContainer extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      totalParticipants: 0,\n      participants     : [],\n      display          : false,\n    };\n\n    this.connect = this.connect.bind(this);\n    this.disconnect = this.disconnect.bind(this);\n    this.joined = this.joined.bind(this);\n    this.getRoomHash = this.joined.bind(this);\n    this.toggleParticipantsMenu = this.toggleParticipantsMenu.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.socketConnect('board');\n    this.props.addSocketListener('connect', this.connect);\n    this.props.addSocketListener('disconnect', this.disconnect);\n    this.props.addSocketListener('joined', this.joined);\n  }\n\n  componentWillUnmount() {\n    this.props.socketEmit('leave', {\n      room: genShortHash(this.props.selectedBoard.id)});\n    this.props.clearSocketListeners();\n    this.props.socketDisconnect();\n  }\n\n  connect() {\n    this.setState({ status: 'connected'});\n    if (false && isEmpty(this.props.loggedInUser)) {\n      browserHistory.push('/signup');\n    } else if (this.props.selectedBoard && !isEmpty(this.props.selectedBoard)) {\n      if (Object.keys(this.props.loggedInUser).length) {\n        if (this.props.permissions.findIndex(permission => {\n          return permission.board_id === this.props.selectedBoard.id; }) === -1) {\n          this.props.addUserPermission(this.props.selectedBoard);\n        }\n      }\n      this.props.socketEmit('join',\n        {\n          room: genShortHash(this.props.selectedBoard.id),\n          name: this.props.loggedInUser.first_name + ' ' + this.props.loggedInUser.last_name,\n        });\n    }\n  }\n\n  disconnect() {\n    this.setState({ status: 'disconnected'});\n  }\n\n  joined({participants, totalParticipants}) {\n    this.setState({ participants });\n    this.setState({ totalParticipants});\n  }\n\n\n  toggleParticipantsMenu() {\n    this.setState({display: !this.state.display});\n  }\n\n  render() {\n    return (\n      <Participants\n        className=\"participants-wrapper\"\n        totalParticipants={this.state.totalParticipants}\n        participants={this.state.participants}\n        display={this.state.display}\n        toggleParticipantsMenu={this.toggleParticipantsMenu} />\n    );\n  }\n\n\n}\n\nconst mapStateToProps = (state) => ({\n  loggedInUser : state.userReducer.loggedInUser,\n  socket       : state.socket,\n  selectedBoard: state.board.selectedBoard,\n  permissions  : state.board.permissions\n\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  addSocketListener   : (eventName, method) => { dispatch(addSocketListener(eventName, method)); },\n  clearSocketListeners: (eventName, method) => { dispatch(clearSocketListeners(eventName, method)); },\n  socketEmit          : (eventName, payload) => { dispatch(socketEmit(eventName, payload)); },\n  socketConnect       : (namespace) => { dispatch(socketConnect(namespace)); },\n  socketDisconnect    : () => { dispatch(socketDisconnect()); }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParticipantsContainer);\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/containers/ParticipantsContainer.js\n **/"],"sourceRoot":""}